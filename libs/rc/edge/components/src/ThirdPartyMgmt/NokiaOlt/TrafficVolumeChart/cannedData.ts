/* eslint-disable max-len */
const defaultGranularity = 10 * 60 * 1000 // 10 minutes in milliseconds

const baseTxData1 = [null, 794154, 781086, 785864, 785803, 785514, 784265, 785747, 784558, 784742, 789184, 786667, 783296, 790885, 787938, 784861, 790862, 789552, 782766, 787204, 788297, 785760, 788870, 786729, 784587, 790740, 789465, 785456, 787928, 790345, 795032, 787060, 786598, 786122, 793856, 813093, 784306, 791651, 829155, 841243, 786391, 798296, 808392, 1028418, 888918, 780464, 796178, 794755, 826522, 795232, 1015752, 1144118, 789362, 795488, 1609213, 1370411, 1318093, 941145, 789151, 785512, 796222, 791900, 795513, 794748, 790472, 796341, 794624, 795218, 790434, 797509, 795394, 791086, 795567, 796064, 793034, 795579, 793787, 792235, 796264, 796330, 790713, 805686, 795842, 789790, 794579, 794343, 793198, 796059, 794498, 776411, 786489, 805597, 773218, 783503, 784409, 781550, 260743]
const baseRxData1 = [null, 1705847, 1699667, 1681332, 1679430, 1676061, 1673088, 1677279, 1675593, 1673678, 1681465, 1678681, 1672278, 1684278, 1680137, 1674612, 1684258, 1683340, 1700956, 1679331, 1681340, 1675781, 1681797, 1678733, 1674501, 1686684, 1685917, 1677029, 1684539, 1687952, 1689126, 1681867, 1680733, 1678501, 1714946, 1715190, 1675303, 1688380, 1723594, 1709594, 1680951, 1660241, 1683007, 1821012, 1934428, 1656908, 1692404, 1694370, 1877697, 1690764, 2767530, 3553955, 1684925, 1696593, 3041497, 3484166, 2863443, 2243063, 1683952, 1674482, 1697382, 1687819, 1695835, 1694723, 1685593, 1696451, 1718153, 1695020, 1685874, 1696847, 1694853, 1686361, 1694684, 1694548, 1688567, 1694854, 1691572, 1687952, 1695693, 1696155, 1685683, 1707530, 1724326, 1684380, 1694430, 1692783, 1688543, 1695588, 1692616, 1663574, 1675238, 1770783, 1653676, 1676435, 1676557, 1672628, 558922]
const baseTxData2 = [null, 791651, 829155, 841243, 786391, 798296, 808392, 1028418, 888918, 780464, 796178, 794755, 826522, 795232, 1015752, 1144118, 789362, 795488, 1609213, 1370411, 1318093, 941145, 789151, 785512, 796222, 791900, 795513, 794748, 790472, 796341, 794624, 795218, 790434, 797509, 795394, 791086, 795567, 796064, 793034, 795579, 793787, 792235, 796264, 796330, 790713, 805686, 795842, 789790, 794579, 794343, 793198, 796059, 794498, 776411, 786489, 805597, 773218, 783503, 784409, 781550, 786482, 787217, 819625, 841968, 879761, 871696, 872842, 827415, 782895, 786153, 785724, 780311, 786091, 784172, 782100, 785136, 786631, 782374, 784352, 786053, 783108, 787959, 783187, 786509, 784229, 786089, 785472, 793686, 781765, 787490, 785287, 781770, 785742, 785812, 779923, 786420, 262243]
const baseRxData2 = [null, 1688380, 1723594, 1709594, 1680951, 1660241, 1683007, 1821012, 1934428, 1656908, 1692404, 1694370, 1877697, 1690764, 2767530, 3553955, 1684925, 1696593, 3041497, 3484166, 2863443, 2243063, 1683952, 1674482, 1697382, 1687819, 1695835, 1694723, 1685593, 1696451, 1718153, 1695020, 1685874, 1696847, 1694853, 1686361, 1694684, 1694548, 1688567, 1694854, 1691572, 1687952, 1695693, 1696155, 1685683, 1707530, 1724326, 1684380, 1694430, 1692783, 1688543, 1695588, 1692616, 1663574, 1675238, 1770783, 1653676, 1676435, 1676557, 1672628, 1680423, 1682058, 1721441, 1682153, 1690172, 1675728, 1680752, 1684516, 1674518, 1680247, 1680043, 1670223, 1680678, 1677861, 1671564, 1679894, 1681781, 1679122, 1703243, 1680348, 1673829, 1682882, 1643916, 1678826, 1675123, 1680536, 1679583, 1702981, 1672275, 1682555, 1679772, 1671741, 1679576, 1679669, 1695334, 1680720, 561309]
const baseTxData3 = [null, 1492489, 24724045, 3715026, 1842726, 2063207, 1674514, 1333566, 1360645, 1584576, 1352892, 1307647, 1269424, 1435670, 1291051, 1296811, 1296287, 1401490, 1287106, 1323863, 1410069, 1434997, 1167615, 1262907, 1315773, 1406483, 1295531, 1287049, 1267781, 1398798, 1298980, 1240359, 1436317, 1439338, 1291222, 1296093, 1291632, 1409816, 1328731, 1307236, 1294202, 1406491, 1296814, 1450541, 1294765, 1452320, 1296275, 1283701, 1304685, 1402760, 1295749, 1293630, 1289525, 1389063, 1357324, 1255436, 1275044, 1403430, 1276710, 1287460, 1265381, 1416285, 1280463, 1287949, 1259686, 1392850, 1287155, 1221418, 1285279, 1391397, 1288426, 1285003, 1284445, 1396541, 1284886, 1280992, 1279977, 1404909, 1272623, 1276483, 1307079, 1386800, 1099660, 1277646, 1299475, 1391036, 1285008, 1287028, 1283472, 1397063, 1264027, 1269940, 1280039, 1403450, 1276195, 1289599, 393466]
const baseRxData3 = [null, 2370059, 2671150, 2346771, 2417386, 2525134, 2327348, 2234918, 2219922, 2450707, 2406149, 2210022, 2173942, 2363192, 2182597, 2200839, 2201234, 2297299, 2183368, 2231002, 2348492, 2490503, 2052312, 2165568, 2308143, 2310977, 2193036, 2187897, 2179799, 2328062, 2190856, 2143045, 2773919, 2495015, 2181747, 2200466, 2196251, 2310147, 2449135, 2211789, 2195434, 2309966, 2193643, 3097341, 2198716, 2626460, 2191670, 2182932, 2209748, 2306159, 2188865, 2189025, 2199037, 2274254, 2554183, 2139622, 2178896, 2301556, 2168159, 2172946, 2173952, 2354630, 2167084, 2178850, 2169075, 2290852, 2172796, 2111521, 2194066, 2286863, 2179042, 2176104, 2187907, 2294405, 2174765, 2167998, 2192339, 2331434, 2158351, 2168533, 2215741, 2283602, 1964298, 2169390, 2208951, 2283888, 2174773, 2177848, 2188730, 2296548, 2218697, 2157394, 2187921, 2325732, 2162443, 2180643, 698510]

const baseTxDataPool = [baseTxData1, baseTxData2, baseTxData3]
const baseRxDataPool = [baseRxData1, baseRxData2, baseRxData3]

export const generateRandomPortTrafficData = (endTime: Date, dataPoints: number):
 {
  time: number[], tx: number[], rx: number[], total: number[]
} => {
  const time: number[] = []
  const txArray: number[] = []
  const rxArray: number[] = []
  const totalArray: number[] = []

  const targetBaseBucket = getRandomInt(2)
  const baseTxData = baseTxDataPool[targetBaseBucket]
  const baseRxData = baseRxDataPool[targetBaseBucket]

  for (let i = 0; i < dataPoints; i++) {
    // Generate time data with intervals
    time.push(endTime.getTime() - i * defaultGranularity)

    // Generate port traffic data based on the baseTxData and baseRxData patterns
    const baseTxIndex = i % baseTxData.length
    const baseRxIndex = i % baseRxData.length
    const txVariation = Math.random() * 50000 - 5000 // Random variation between -5000 and 45000 bytes
    const rxVariation = Math.random() * 20000 - 5000 // Random variation between -5000 and 15000 bytes
    // console.log(txVariation, rxVariation)
    const tx = Math.max(0, (baseTxData[baseTxIndex] ?? 0) + txVariation) // Ensure tx is non-negative
    const rx = Math.max(0, (baseRxData[baseRxIndex] ?? 0) + rxVariation) // Ensure rx is non-negative
    const total = tx + rx

    txArray.push(tx)
    rxArray.push(rx)
    totalArray.push(total)
  }

  return {
    time, tx: txArray, rx: rxArray, total: totalArray
  }
}

function getRandomInt (maxInt: number): number {
  return Math.floor(Math.random() * (maxInt + 1))
}