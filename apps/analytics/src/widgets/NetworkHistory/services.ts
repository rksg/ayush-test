import { gql } from 'graphql-request'

import { dataApi }      from '@acx-ui/analytics/services'
import { GlobalFilter } from '@acx-ui/analytics/utils'

export interface NetworkHistoryData {
  connectedClientCount: number[]
  impactedClientCount: number[]
  newClientCount: number[]
  time: string[]
}

interface Response <TimeSeriesData> {
  network: {
    hierarchyNode: {
      timeSeries: TimeSeriesData
    }
  }
}

  const severity = [
    {
      "gt": 0.9,
      "lte": 1
    },
    {
      "gt": 0.75,
      "lte": 0.9
    },
    {
      "gt": 0.6,
      "lte": 0.75
    },
    {
      "gt": 0,
      "lte": 0.6
    }
  ]
  // TODO: Make it dynamic
  const code = [
    "ttc",
    "ttc+radius-failure",
    "ttc+auth-failure",
    "ttc+assoc-failure",
    "ttc+eap-failure",
    "ttc+dhcp-failure",
    "radius-failure",
    "high-radius-failure",
    "eap-failure",
    "high-eap-failure",
    "dhcp-failure",
    "high-dhcp-failure",
    "auth-failure",
    "high-auth-failure",
    "assoc-failure",
    "high-assoc-failure",
    "p-cov-clientrssi-low",
    "p-load-sz-cpu-load",
    "p-switch-memory-high",
    "p-channeldist-suboptimal-plan-24g",
    "p-channeldist-suboptimal-plan-50g-outdoor",
    "p-channeldist-suboptimal-plan-50g-indoor",
    "i-net-time-future",
    "i-net-time-past",
    "i-net-sz-net-latency",
    "i-apserv-high-num-reboots",
    "i-apserv-continuous-reboots",
    "i-apserv-downtime-high",
    "i-switch-vlan-mismatch",
    "i-switch-poe-pd",
    "i-apinfra-poe-low",
    "i-apinfra-wanthroughput-low"
  ]
  const res = {
    "data": {
      "network": {
        "hierarchyNode": {
          "timeSeries": {
            "time": [
              "2022-06-10T07:00:00.000Z",
              "2022-06-10T07:30:00.000Z",
              "2022-06-10T08:00:00.000Z",
              "2022-06-10T08:30:00.000Z",
              "2022-06-10T09:00:00.000Z",
              "2022-06-10T09:30:00.000Z",
              "2022-06-10T10:00:00.000Z",
              "2022-06-10T10:30:00.000Z",
              "2022-06-10T11:00:00.000Z",
              "2022-06-10T11:30:00.000Z",
              "2022-06-10T12:00:00.000Z",
              "2022-06-10T12:30:00.000Z",
              "2022-06-10T13:00:00.000Z",
              "2022-06-10T13:30:00.000Z",
              "2022-06-10T14:00:00.000Z",
              "2022-06-10T14:30:00.000Z",
              "2022-06-10T15:00:00.000Z",
              "2022-06-10T15:30:00.000Z",
              "2022-06-10T16:00:00.000Z",
              "2022-06-10T16:30:00.000Z",
              "2022-06-10T17:00:00.000Z",
              "2022-06-10T17:30:00.000Z",
              "2022-06-10T18:00:00.000Z",
              "2022-06-10T18:30:00.000Z",
              "2022-06-10T19:00:00.000Z",
              "2022-06-10T19:30:00.000Z",
              "2022-06-10T20:00:00.000Z",
              "2022-06-10T20:30:00.000Z",
              "2022-06-10T21:00:00.000Z",
              "2022-06-10T21:30:00.000Z",
              "2022-06-10T22:00:00.000Z",
              "2022-06-10T22:30:00.000Z",
              "2022-06-10T23:00:00.000Z",
              "2022-06-10T23:30:00.000Z",
              "2022-06-11T00:00:00.000Z",
              "2022-06-11T00:30:00.000Z",
              "2022-06-11T01:00:00.000Z",
              "2022-06-11T01:30:00.000Z",
              "2022-06-11T02:00:00.000Z",
              "2022-06-11T02:30:00.000Z",
              "2022-06-11T03:00:00.000Z",
              "2022-06-11T03:30:00.000Z",
              "2022-06-11T04:00:00.000Z",
              "2022-06-11T04:30:00.000Z",
              "2022-06-11T05:00:00.000Z",
              "2022-06-11T05:30:00.000Z",
              "2022-06-11T06:00:00.000Z",
              "2022-06-11T06:30:00.000Z",
              "2022-06-11T07:00:00.000Z",
              "2022-06-11T07:30:00.000Z",
              "2022-06-11T08:00:00.000Z",
              "2022-06-11T08:30:00.000Z",
              "2022-06-11T09:00:00.000Z",
              "2022-06-11T09:30:00.000Z",
              "2022-06-11T10:00:00.000Z",
              "2022-06-11T10:30:00.000Z",
              "2022-06-11T11:00:00.000Z",
              "2022-06-11T11:30:00.000Z",
              "2022-06-11T12:00:00.000Z",
              "2022-06-11T12:30:00.000Z",
              "2022-06-11T13:00:00.000Z",
              "2022-06-11T13:30:00.000Z",
              "2022-06-11T14:00:00.000Z",
              "2022-06-11T14:30:00.000Z",
              "2022-06-11T15:00:00.000Z",
              "2022-06-11T15:30:00.000Z",
              "2022-06-11T16:00:00.000Z",
              "2022-06-11T16:30:00.000Z",
              "2022-06-11T17:00:00.000Z",
              "2022-06-11T17:30:00.000Z",
              "2022-06-11T18:00:00.000Z",
              "2022-06-11T18:30:00.000Z",
              "2022-06-11T19:00:00.000Z",
              "2022-06-11T19:30:00.000Z",
              "2022-06-11T20:00:00.000Z",
              "2022-06-11T20:30:00.000Z",
              "2022-06-11T21:00:00.000Z",
              "2022-06-11T21:30:00.000Z",
              "2022-06-11T22:00:00.000Z",
              "2022-06-11T22:30:00.000Z",
              "2022-06-11T23:00:00.000Z",
              "2022-06-11T23:30:00.000Z",
              "2022-06-12T00:00:00.000Z",
              "2022-06-12T00:30:00.000Z",
              "2022-06-12T01:00:00.000Z",
              "2022-06-12T01:30:00.000Z",
              "2022-06-12T02:00:00.000Z",
              "2022-06-12T02:30:00.000Z",
              "2022-06-12T03:00:00.000Z",
              "2022-06-12T03:30:00.000Z",
              "2022-06-12T04:00:00.000Z",
              "2022-06-12T04:30:00.000Z",
              "2022-06-12T05:00:00.000Z",
              "2022-06-12T05:30:00.000Z",
              "2022-06-12T06:00:00.000Z",
              "2022-06-12T06:30:00.000Z",
              "2022-06-12T07:00:00.000Z",
              "2022-06-12T07:30:00.000Z",
              "2022-06-12T08:00:00.000Z",
              "2022-06-12T08:30:00.000Z",
              "2022-06-12T09:00:00.000Z",
              "2022-06-12T09:30:00.000Z",
              "2022-06-12T10:00:00.000Z",
              "2022-06-12T10:30:00.000Z",
              "2022-06-12T11:00:00.000Z",
              "2022-06-12T11:30:00.000Z",
              "2022-06-12T12:00:00.000Z",
              "2022-06-12T12:30:00.000Z",
              "2022-06-12T13:00:00.000Z",
              "2022-06-12T13:30:00.000Z",
              "2022-06-12T14:00:00.000Z",
              "2022-06-12T14:30:00.000Z",
              "2022-06-12T15:00:00.000Z",
              "2022-06-12T15:30:00.000Z",
              "2022-06-12T16:00:00.000Z",
              "2022-06-12T16:30:00.000Z",
              "2022-06-12T17:00:00.000Z",
              "2022-06-12T17:30:00.000Z",
              "2022-06-12T18:00:00.000Z",
              "2022-06-12T18:30:00.000Z",
              "2022-06-12T19:00:00.000Z",
              "2022-06-12T19:30:00.000Z",
              "2022-06-12T20:00:00.000Z",
              "2022-06-12T20:30:00.000Z",
              "2022-06-12T21:00:00.000Z",
              "2022-06-12T21:30:00.000Z",
              "2022-06-12T22:00:00.000Z",
              "2022-06-12T22:30:00.000Z",
              "2022-06-12T23:00:00.000Z",
              "2022-06-12T23:30:00.000Z",
              "2022-06-13T00:00:00.000Z",
              "2022-06-13T00:30:00.000Z",
              "2022-06-13T01:00:00.000Z",
              "2022-06-13T01:30:00.000Z",
              "2022-06-13T02:00:00.000Z",
              "2022-06-13T02:30:00.000Z",
              "2022-06-13T03:00:00.000Z",
              "2022-06-13T03:30:00.000Z",
              "2022-06-13T04:00:00.000Z",
              "2022-06-13T04:30:00.000Z",
              "2022-06-13T05:00:00.000Z",
              "2022-06-13T05:30:00.000Z",
              "2022-06-13T06:00:00.000Z",
              "2022-06-13T06:30:00.000Z",
              "2022-06-13T07:00:00.000Z",
              "2022-06-13T07:30:00.000Z",
              "2022-06-13T08:00:00.000Z",
              "2022-06-13T08:30:00.000Z",
              "2022-06-13T09:00:00.000Z",
              "2022-06-13T09:30:00.000Z",
              "2022-06-13T10:00:00.000Z",
              "2022-06-13T10:30:00.000Z",
              "2022-06-13T11:00:00.000Z",
              "2022-06-13T11:30:00.000Z",
              "2022-06-13T12:00:00.000Z",
              "2022-06-13T12:30:00.000Z",
              "2022-06-13T13:00:00.000Z",
              "2022-06-13T13:30:00.000Z",
              "2022-06-13T14:00:00.000Z",
              "2022-06-13T14:30:00.000Z",
              "2022-06-13T15:00:00.000Z",
              "2022-06-13T15:30:00.000Z",
              "2022-06-13T16:00:00.000Z",
              "2022-06-13T16:30:00.000Z",
              "2022-06-13T17:00:00.000Z",
              "2022-06-13T17:30:00.000Z",
              "2022-06-13T18:00:00.000Z",
              "2022-06-13T18:30:00.000Z",
              "2022-06-13T19:00:00.000Z",
              "2022-06-13T19:30:00.000Z",
              "2022-06-13T20:00:00.000Z",
              "2022-06-13T20:30:00.000Z",
              "2022-06-13T21:00:00.000Z",
              "2022-06-13T21:30:00.000Z",
              "2022-06-13T22:00:00.000Z",
              "2022-06-13T22:30:00.000Z",
              "2022-06-13T23:00:00.000Z",
              "2022-06-13T23:30:00.000Z",
              "2022-06-14T00:00:00.000Z",
              "2022-06-14T00:30:00.000Z",
              "2022-06-14T01:00:00.000Z",
              "2022-06-14T01:30:00.000Z",
              "2022-06-14T02:00:00.000Z",
              "2022-06-14T02:30:00.000Z",
              "2022-06-14T03:00:00.000Z",
              "2022-06-14T03:30:00.000Z",
              "2022-06-14T04:00:00.000Z",
              "2022-06-14T04:30:00.000Z",
              "2022-06-14T05:00:00.000Z",
              "2022-06-14T05:30:00.000Z",
              "2022-06-14T06:00:00.000Z",
              "2022-06-14T06:30:00.000Z",
              "2022-06-14T07:00:00.000Z",
              "2022-06-14T07:30:00.000Z",
              "2022-06-14T08:00:00.000Z",
              "2022-06-14T08:30:00.000Z",
              "2022-06-14T09:00:00.000Z",
              "2022-06-14T09:30:00.000Z",
              "2022-06-14T10:00:00.000Z",
              "2022-06-14T10:30:00.000Z",
              "2022-06-14T11:00:00.000Z",
              "2022-06-14T11:30:00.000Z",
              "2022-06-14T12:00:00.000Z",
              "2022-06-14T12:30:00.000Z",
              "2022-06-14T13:00:00.000Z",
              "2022-06-14T13:30:00.000Z",
              "2022-06-14T14:00:00.000Z",
              "2022-06-14T14:30:00.000Z",
              "2022-06-14T15:00:00.000Z",
              "2022-06-14T15:30:00.000Z",
              "2022-06-14T16:00:00.000Z",
              "2022-06-14T16:30:00.000Z",
              "2022-06-14T17:00:00.000Z",
              "2022-06-14T17:30:00.000Z",
              "2022-06-14T18:00:00.000Z",
              "2022-06-14T18:30:00.000Z",
              "2022-06-14T19:00:00.000Z",
              "2022-06-14T19:30:00.000Z",
              "2022-06-14T20:00:00.000Z",
              "2022-06-14T20:30:00.000Z",
              "2022-06-14T21:00:00.000Z",
              "2022-06-14T21:30:00.000Z",
              "2022-06-14T22:00:00.000Z",
              "2022-06-14T22:30:00.000Z",
              "2022-06-14T23:00:00.000Z",
              "2022-06-14T23:30:00.000Z",
              "2022-06-15T00:00:00.000Z",
              "2022-06-15T00:30:00.000Z",
              "2022-06-15T01:00:00.000Z",
              "2022-06-15T01:30:00.000Z",
              "2022-06-15T02:00:00.000Z",
              "2022-06-15T02:30:00.000Z",
              "2022-06-15T03:00:00.000Z",
              "2022-06-15T03:30:00.000Z",
              "2022-06-15T04:00:00.000Z",
              "2022-06-15T04:30:00.000Z",
              "2022-06-15T05:00:00.000Z",
              "2022-06-15T05:30:00.000Z",
              "2022-06-15T06:00:00.000Z",
              "2022-06-15T06:30:00.000Z",
              "2022-06-15T07:00:00.000Z",
              "2022-06-15T07:30:00.000Z",
              "2022-06-15T08:00:00.000Z",
              "2022-06-15T08:30:00.000Z",
              "2022-06-15T09:00:00.000Z",
              "2022-06-15T09:30:00.000Z",
              "2022-06-15T10:00:00.000Z",
              "2022-06-15T10:30:00.000Z",
              "2022-06-15T11:00:00.000Z",
              "2022-06-15T11:30:00.000Z",
              "2022-06-15T12:00:00.000Z",
              "2022-06-15T12:30:00.000Z",
              "2022-06-15T13:00:00.000Z",
              "2022-06-15T13:30:00.000Z",
              "2022-06-15T14:00:00.000Z",
              "2022-06-15T14:30:00.000Z",
              "2022-06-15T15:00:00.000Z",
              "2022-06-15T15:30:00.000Z",
              "2022-06-15T16:00:00.000Z",
              "2022-06-15T16:30:00.000Z",
              "2022-06-15T17:00:00.000Z",
              "2022-06-15T17:30:00.000Z",
              "2022-06-15T18:00:00.000Z",
              "2022-06-15T18:30:00.000Z",
              "2022-06-15T19:00:00.000Z",
              "2022-06-15T19:30:00.000Z",
              "2022-06-15T20:00:00.000Z",
              "2022-06-15T20:30:00.000Z",
              "2022-06-15T21:00:00.000Z",
              "2022-06-15T21:30:00.000Z",
              "2022-06-15T22:00:00.000Z",
              "2022-06-15T22:30:00.000Z",
              "2022-06-15T23:00:00.000Z",
              "2022-06-15T23:30:00.000Z",
              "2022-06-16T00:00:00.000Z",
              "2022-06-16T00:30:00.000Z",
              "2022-06-16T01:00:00.000Z",
              "2022-06-16T01:30:00.000Z",
              "2022-06-16T02:00:00.000Z",
              "2022-06-16T02:30:00.000Z",
              "2022-06-16T03:00:00.000Z",
              "2022-06-16T03:30:00.000Z",
              "2022-06-16T04:00:00.000Z",
              "2022-06-16T04:30:00.000Z",
              "2022-06-16T05:00:00.000Z",
              "2022-06-16T05:30:00.000Z",
              "2022-06-16T06:00:00.000Z",
              "2022-06-16T06:30:00.000Z",
              "2022-06-16T07:00:00.000Z",
              "2022-06-16T07:30:00.000Z",
              "2022-06-16T08:00:00.000Z",
              "2022-06-16T08:30:00.000Z",
              "2022-06-16T09:00:00.000Z",
              "2022-06-16T09:30:00.000Z",
              "2022-06-16T10:00:00.000Z",
              "2022-06-16T10:30:00.000Z",
              "2022-06-16T11:00:00.000Z",
              "2022-06-16T11:30:00.000Z",
              "2022-06-16T12:00:00.000Z",
              "2022-06-16T12:30:00.000Z",
              "2022-06-16T13:00:00.000Z",
              "2022-06-16T13:30:00.000Z",
              "2022-06-16T14:00:00.000Z",
              "2022-06-16T14:30:00.000Z",
              "2022-06-16T15:00:00.000Z",
              "2022-06-16T15:30:00.000Z",
              "2022-06-16T16:00:00.000Z",
              "2022-06-16T16:30:00.000Z",
              "2022-06-16T17:00:00.000Z",
              "2022-06-16T17:30:00.000Z",
              "2022-06-16T18:00:00.000Z",
              "2022-06-16T18:30:00.000Z",
              "2022-06-16T19:00:00.000Z",
              "2022-06-16T19:30:00.000Z",
              "2022-06-16T20:00:00.000Z",
              "2022-06-16T20:30:00.000Z",
              "2022-06-16T21:00:00.000Z",
              "2022-06-16T21:30:00.000Z",
              "2022-06-16T22:00:00.000Z",
              "2022-06-16T22:30:00.000Z",
              "2022-06-16T23:00:00.000Z",
              "2022-06-16T23:30:00.000Z",
              "2022-06-17T00:00:00.000Z",
              "2022-06-17T00:30:00.000Z",
              "2022-06-17T01:00:00.000Z",
              "2022-06-17T01:30:00.000Z",
              "2022-06-17T02:00:00.000Z",
              "2022-06-17T02:30:00.000Z",
              "2022-06-17T03:00:00.000Z",
              "2022-06-17T03:30:00.000Z",
              "2022-06-17T04:00:00.000Z",
              "2022-06-17T04:30:00.000Z",
              "2022-06-17T05:00:00.000Z",
              "2022-06-17T05:30:00.000Z",
              "2022-06-17T06:00:00.000Z",
              "2022-06-17T06:30:00.000Z",
              "2022-06-17T07:00:00.000Z"
            ],
            "newClientCount": [
              88,
              84,
              83,
              76,
              76,
              83,
              91,
              86,
              100,
              99,
              105,
              82,
              74,
              76,
              84,
              100,
              90,
              94,
              86,
              84,
              73,
              120,
              83,
              84,
              78,
              74,
              83,
              74,
              83,
              67,
              60,
              59,
              69,
              78,
              84,
              90,
              113,
              113,
              101,
              101,
              111,
              100,
              95,
              97,
              88,
              85,
              89,
              76,
              82,
              74,
              71,
              73,
              76,
              38,
              73,
              63,
              65,
              34,
              43,
              46,
              53,
              50,
              40,
              50,
              47,
              56,
              52,
              70,
              64,
              65,
              60,
              58,
              66,
              58,
              47,
              52,
              55,
              46,
              33,
              47,
              47,
              50,
              46,
              56,
              39,
              44,
              49,
              57,
              65,
              56,
              68,
              49,
              63,
              64,
              42,
              53,
              50,
              46,
              37,
              48,
              49,
              49,
              40,
              44,
              41,
              47,
              34,
              35,
              47,
              57,
              52,
              55,
              67,
              70,
              58,
              60,
              59,
              59,
              60,
              40,
              51,
              48,
              55,
              36,
              55,
              46,
              50,
              50,
              50,
              52,
              61,
              68,
              53,
              52,
              64,
              46,
              75,
              73,
              81,
              64,
              69,
              74,
              63,
              73,
              53,
              57,
              56,
              63,
              75,
              63,
              50,
              44,
              87,
              75,
              68,
              49,
              51,
              104,
              89,
              85,
              66,
              77,
              60,
              66,
              53,
              52,
              56,
              60,
              49,
              47,
              39,
              38,
              50,
              47,
              46,
              51,
              46,
              54,
              59,
              58,
              53,
              65,
              71,
              66,
              66,
              57,
              66,
              69,
              64,
              71,
              54,
              71,
              73,
              50,
              44,
              49,
              84,
              48,
              59,
              49,
              52,
              55,
              43,
              43,
              55,
              42,
              49,
              47,
              70,
              85,
              82,
              64,
              54,
              56,
              43,
              51,
              42,
              35,
              38,
              38,
              59,
              51,
              46,
              43,
              46,
              43,
              57,
              65,
              56,
              69,
              68,
              48,
              81,
              59,
              59,
              55,
              62,
              69,
              54,
              55,
              57,
              55,
              55,
              58,
              65,
              75,
              74,
              132,
              59,
              50,
              46,
              69,
              122,
              43,
              65,
              62,
              65,
              58,
              53,
              54,
              52,
              57,
              43,
              52,
              58,
              43,
              46,
              60,
              57,
              57,
              57,
              54,
              61,
              54,
              52,
              63,
              68,
              66,
              78,
              87,
              70,
              54,
              89,
              136,
              69,
              72,
              66,
              53,
              60,
              65,
              62,
              59,
              62,
              57,
              49,
              55,
              46,
              52,
              48,
              55,
              49,
              64,
              57,
              49,
              57,
              65,
              60,
              62,
              81,
              57,
              48,
              37,
              51,
              44,
              44,
              43,
              54,
              39,
              40,
              33,
              34,
              40,
              55,
              78,
              55,
              54,
              40,
              46,
              69,
              53,
              61,
              68,
              63,
              69,
              70,
              49,
              25
            ],
            "impactedClientCount": [
              28,
              27,
              26,
              26,
              26,
              26,
              27,
              29,
              28,
              2,
              3,
              30,
              24,
              26,
              30,
              26,
              31,
              26,
              31,
              31,
              27,
              26,
              28,
              26,
              26,
              26,
              26,
              26,
              26,
              26,
              28,
              28,
              28,
              26,
              26,
              26,
              27,
              27,
              26,
              26,
              26,
              26,
              26,
              26,
              26,
              26,
              26,
              28,
              31,
              30,
              30,
              33,
              29,
              2,
              28,
              26,
              26,
              2,
              1,
              1,
              1,
              3,
              2,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              2,
              5,
              1,
              1,
              1,
              2,
              2,
              1,
              1,
              2,
              2,
              1,
              2,
              1,
              2,
              5,
              1,
              3,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              3,
              3,
              3,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              2,
              1,
              1,
              1,
              1,
              3,
              1,
              1,
              1,
              7,
              6,
              6,
              1,
              1,
              1,
              1,
              1,
              2,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              2,
              4,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              26,
              27,
              25,
              1,
              1,
              1,
              1,
              4,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              5,
              5,
              3,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              4,
              1,
              24,
              26,
              2,
              2,
              2,
              27,
              2,
              2,
              2,
              2,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              3,
              1,
              1,
              3,
              3,
              1,
              2,
              1,
              1,
              1,
              1,
              1,
              3,
              1,
              1,
              1,
              1,
              1,
              25,
              29,
              51,
              1,
              1,
              1,
              7,
              34,
              2,
              3,
              3,
              1,
              5,
              5,
              5,
              1,
              1,
              1,
              1,
              1,
              1,
              3,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              36,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              2,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              1,
              6,
              1,
              1,
              1,
              7,
              1,
              1,
              1,
              1,
              1,
              2,
              1,
              1,
              2,
              1,
              1,
              1,
              3,
              1,
              1,
              2,
              5,
              2,
              1,
              1,
              3,
              1,
              1,
              1,
              null,
              null,
              null,
              null,
              1,
              1
            ],
            "connectedClientCount": [
              385,
              373,
              375,
              375,
              375,
              384,
              381,
              385,
              384,
              384,
              392,
              390,
              393,
              384,
              396,
              407,
              390,
              402,
              396,
              397,
              392,
              398,
              392,
              390,
              381,
              379,
              383,
              380,
              374,
              372,
              365,
              365,
              375,
              379,
              383,
              393,
              393,
              391,
              392,
              403,
              398,
              406,
              400,
              398,
              396,
              393,
              401,
              403,
              398,
              392,
              385,
              384,
              384,
              374,
              377,
              380,
              384,
              379,
              387,
              389,
              387,
              387,
              381,
              381,
              377,
              385,
              380,
              379,
              373,
              375,
              373,
              368,
              365,
              360,
              350,
              347,
              344,
              348,
              346,
              352,
              352,
              355,
              361,
              361,
              356,
              359,
              363,
              366,
              374,
              368,
              372,
              366,
              368,
              375,
              368,
              362,
              363,
              366,
              361,
              365,
              368,
              363,
              369,
              377,
              372,
              378,
              381,
              374,
              380,
              386,
              387,
              381,
              385,
              381,
              379,
              383,
              380,
              368,
              373,
              362,
              361,
              356,
              349,
              334,
              342,
              341,
              349,
              347,
              350,
              356,
              361,
              362,
              360,
              352,
              359,
              353,
              365,
              380,
              384,
              384,
              393,
              401,
              391,
              395,
              386,
              385,
              387,
              391,
              402,
              398,
              400,
              401,
              400,
              387,
              390,
              391,
              389,
              392,
              391,
              398,
              400,
              404,
              404,
              387,
              390,
              381,
              379,
              377,
              372,
              373,
              368,
              360,
              360,
              359,
              354,
              357,
              356,
              371,
              374,
              375,
              379,
              389,
              391,
              383,
              381,
              383,
              390,
              395,
              398,
              396,
              396,
              392,
              391,
              387,
              384,
              389,
              393,
              389,
              384,
              386,
              391,
              386,
              383,
              381,
              389,
              380,
              385,
              386,
              393,
              397,
              403,
              400,
              386,
              383,
              375,
              379,
              369,
              365,
              365,
              363,
              365,
              363,
              357,
              354,
              360,
              360,
              369,
              384,
              379,
              372,
              372,
              362,
              380,
              381,
              384,
              390,
              393,
              392,
              387,
              381,
              384,
              381,
              380,
              378,
              383,
              383,
              380,
              374,
              379,
              380,
              374,
              379,
              377,
              369,
              369,
              373,
              386,
              380,
              369,
              363,
              362,
              366,
              361,
              362,
              359,
              354,
              349,
              347,
              346,
              352,
              354,
              349,
              362,
              350,
              349,
              365,
              369,
              375,
              378,
              377,
              368,
              371,
              379,
              378,
              384,
              381,
              379,
              371,
              371,
              375,
              375,
              378,
              373,
              359,
              350,
              353,
              349,
              349,
              355,
              352,
              357,
              361,
              363,
              360,
              365,
              368,
              367,
              366,
              363,
              359,
              342,
              326,
              322,
              321,
              322,
              324,
              322,
              322,
              320,
              319,
              320,
              317,
              326,
              340,
              336,
              342,
              333,
              337,
              342,
              349,
              360,
              380,
              373,
              413,
              401,
              395,
              395
            ]
          }
        }
      }
    }
  }
export const api = dataApi.injectEndpoints({
  endpoints: (build) => ({
    networkHistory: build.query<
      NetworkHistoryData,
      GlobalFilter
    >({
      // todo: Skipping the filter for impactedClientCount
      query: (payload) => ({
        document: gql`
            query widget_networkHistory(
            $path:[HierarchyNodeInput],
            $start: DateTime,
            $end: DateTime,
            $granularity: String,
            $severity: [Range],
            $code: [String]
            ){
            network(start: $start end: $end){
                hierarchyNode(path:$path){
                timeSeries(granularity:$granularity){
                    time
                    newClientCount: connectionAttemptCount
                    impactedClientCount: impactedClientCountBySeverity(
                        filter:{severity:$severity, code: $code}
                    )
                    connectedClientCount
                }
                }
            }
            }
        `,
        variables: {
          path: payload.path,
          start: payload.startDate,
          end: payload.endDate,
          granularity: 'PT15M',
          severity: severity,
          code: code
        }
      }),
      providesTags: [{ type: 'Monitoring', id: 'NETWORK_HISTORY' }],
      transformResponse: (response: Response<NetworkHistoryData>) =>
        response.network.hierarchyNode.timeSeries
        // res.data.network.hierarchyNode.timeSeries
    })
  })
})

export const { useNetworkHistoryQuery } = api
